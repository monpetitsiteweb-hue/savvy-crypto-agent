# Signer Service Environment Configuration
# Copy to .env.prod for production deployment

# Server Configuration
PORT=8787
NODE_ENV=production

# Bot Wallet (Base Chain)
# CRITICAL: Keep these values secret!
BOT_PRIVATE_KEY=0x...your-private-key-here
BOT_ADDRESS=0x...your-bot-address-here

# Authentication (HMAC-based)
# Legacy auth (optional, for backward compatibility)
WEBHOOK_AUTH=your-legacy-secret-token

# Active HMAC (current)
HMAC_ACTIVE=your-active-hmac-secret-here

# Previous HMAC (during rotation grace period)
HMAC_PREVIOUS=

# Network Configuration
RPC_URL_8453=https://mainnet.base.org
ALLOW_CHAIN_ID=8453

# Safety Limits
MAX_TX_VALUE_WEI=1000000000000000000

# === LOCAL DEVELOPMENT ===
# For local testing with supabase functions serve:
# PORT=8787
# BOT_PRIVATE_KEY=0x...local-test-key
# BOT_ADDRESS=0x...local-test-address
# WEBHOOK_AUTH=local-dev-secret
# HMAC_ACTIVE=local-dev-hmac
# RPC_URL_8453=https://mainnet.base.org
# MAX_TX_VALUE_WEI=1000000000000000000

# === PRODUCTION ===
# For production deployment on signer.crypto.mon-petit-site-web.fr:
# 1. HMAC_ACTIVE=14c0a54cca50acff0d2b03548e61d949d5f392d69ba6b60276929285085047babba615c223e180da4dc9f79b2bc900e87d9eb9cbcaee842dff9cd423f35503cb
# 2. BOT_PRIVATE_KEY=<your-production-signer-private-key>
# 3. BOT_ADDRESS=<corresponding-wallet-address>
# 4. Use secure RPC URL for Base (8453)
# 5. MAX_TX_VALUE_WEI=1000000000000000000 (1 WETH max)

# === HMAC ROTATION ===
# When rotating HMAC:
# 1. Generate new HMAC
# 2. Move current HMAC_ACTIVE â†’ HMAC_PREVIOUS
# 3. Set new HMAC_ACTIVE
# 4. Update Supabase secrets with new HMAC
# 5. Wait grace period (60 min recommended)
# 6. Clear HMAC_PREVIOUS
